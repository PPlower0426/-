<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>í•©ê²©ì˜ íƒ‘ - ë³€ë¦¬ì‚¬OX</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Do+Hyeon&family=Gugi&family=Black+Han+Sans&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* í™”ë©´ í¬ê¸° ì¡°ì •ì„ ìœ„í•œ ì¶”ê°€ ìŠ¤íƒ€ì¼ */
        html, body {
            overflow: hidden;
            width: 100%;
            height: 100%;
            margin: 0;
            padding: 0;
        }
        
        .game-wrapper {
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }
        
        .game-container {
            width: 90%;
            max-width: 1400px;
            height: 90vh;
            display: flex;
            flex-direction: column;
            padding: 15px;
            position: relative;
            z-index: 1;
            background: rgba(10, 10, 26, 0.7);
            border-radius: 20px;
            border: 3px solid rgba(78, 205, 196, 0.3);
            box-shadow: 0 0 50px rgba(0, 0, 0, 0.8);
            margin: 0 auto;
        }

        /* ë°°ê²½ íš¨ê³¼ */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 80%, rgba(120, 119, 198, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(255, 119, 97, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 40% 40%, rgba(78, 205, 196, 0.2) 0%, transparent 50%);
            z-index: 0;
            animation: bgPulse 8s infinite alternate;
        }

        @keyframes bgPulse {
            0% { opacity: 0.8; }
            100% { opacity: 1; }
        }

        /* ë¹›ë‚˜ëŠ” ì…ì íš¨ê³¼ */
        body::after {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                radial-gradient(2px 2px at 20px 30px, rgba(255, 255, 255, 0.5), transparent),
                radial-gradient(2px 2px at 40px 70px, rgba(255, 255, 255, 0.4), transparent),
                radial-gradient(3px 3px at 60px 20px, rgba(255, 255, 255, 0.3), transparent),
                radial-gradient(2px 2px at 80px 50px, rgba(255, 255, 255, 0.5), transparent),
                radial-gradient(3px 3px at 90px 80px, rgba(255, 255, 255, 0.4), transparent);
            background-repeat: repeat;
            background-size: 200px 200px;
            z-index: 0;
            animation: particlesMove 20s linear infinite;
            opacity: 0.3;
        }

        @keyframes particlesMove {
            0% { background-position: 0 0; }
            100% { background-position: 200px 200px; }
        }
    </style>
    <script src="device-detector.js"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="game-wrapper">
        <div class="game-container">
            <!-- ê²Œì„ í—¤ë” -->
            <div class="game-header">
                <div class="tower-info">
                    <h1 class="tower-title">í•©ê²©ì˜ íƒ‘</h1>
                    <div class="floor-display">
                        <i class="fas fa-layer-group"></i>
                        <span>í˜„ì¬ ì¸µìˆ˜: <span id="current-floor">1</span>ì¸µ</span>
                    </div>
                </div>
                
                <div class="player-status">
                    <!-- ì˜ì›… HP -->
                    <div class="hp-section">
                        <div class="hp-label">
                            <i class="fas fa-heart heartbeat"></i>
                            <span>ì˜ì›… ìƒëª…ë ¥</span>
                        </div>
                        <div class="hp-container">
                            <div class="hp-bar">
                                <div class="hp-fill" id="hero-hp-bar" style="width: 100%"></div>
                                <div class="hp-text" id="hero-hp-text">100 / 100</div>
                            </div>
                            <div class="hp-sparkle"></div>
                        </div>
                    </div>
                    
                    <!-- ì½¤ë³´ -->
                    <div class="combo-section">
                        <div class="combo-label">ì½¤ë³´</div>
                        <div class="combo-display">
                            <i class="fas fa-fire combo-fire"></i>
                            <span id="combo-count">0</span>
                        </div>
                    </div>
                    
                    <!-- í¬ì…˜ -->
                    <div class="potion-section">
                        <div class="potion-label">ì§€ì‹ì˜ ë¬¼ì•½</div>
                        <div class="potion-count">
                            <i class="fas fa-flask potion-glow"></i>
                            <span id="potion-number">3</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- ì „íˆ¬ ì˜ì—­ -->
            <div class="battle-area">
                <!-- ì¤‘ì•™: ëª¬ìŠ¤í„° ì˜ì—­ -->
                <div class="center-panel">
                    <!-- ë¬¸ì§€ê¸° ë§í’ì„  -->
                    <div class="monster-speech-bubble" id="monster-speech">
                        <div class="speech-text">í•©ê²©ì˜ íƒ‘ì— ì˜¤ì‹  ê²ƒì„ í™˜ì˜í•©ë‹ˆë‹¤!</div>
                        <div class="speech-tail"></div>
                        <div class="speech-sparkles">
                            <div class="sparkle"></div>
                            <div class="sparkle"></div>
                            <div class="sparkle"></div>
                        </div>
                    </div>
                    
                    <div class="monster-section">
                        <div class="monster-glow"></div>
                        <div class="monster-name" id="monster-name">í•©ê²©ì˜ ë¬¸ì§€ê¸°</div>
                        <div class="monster-level">
                            <span>ë‚œì´ë„: </span>
                            <span id="monster-level">ì‰¬ì›€</span>
                        </div>
                        
                        <!-- ëª¬ìŠ¤í„° ìƒíƒœ íš¨ê³¼ -->
                        <div class="monster-status-effects" id="monster-status-effects">
                            <div class="status-effect invincible-status" id="invincible-status" style="display: none;">
                                <i class="fas fa-shield-alt"></i>
                                <span>ë¬´ì </span>
                            </div>
                            <div class="status-effect regen-status" id="regen-status" style="display: none;">
                                <i class="fas fa-heart"></i>
                                <span>íšŒë³µ ì¤‘</span>
                            </div>
                            <!-- ë… ìƒíƒœ íš¨ê³¼ - (-2ì´ˆ) ì •ë³´ í¬í•¨ -->
                            <div class="status-effect poison-status" id="poison-status" style="display: none;">
                                <i class="fas fa-skull-crossbones"></i>
                                <span class="poison-text">ë…</span>
                            </div>
                        </div>
                        
                        <div class="monster-visual">
                            <div class="monster-aura"></div>
                            <div class="monster-image">
                                <div class="monster-emoji" id="monster-emoji">ğŸ‘¹</div>
                                <div class="monster-glare"></div>
                            </div>
                            <div class="damage-popup" id="damage-popup">-50</div>
                            <div class="hit-effect" id="hit-effect"></div>
                        </div>
                        
                        <div class="monster-hp-section">
                            <div class="monster-hp-container">
                                <div class="monster-hp-bar">
                                    <div class="monster-hp-fill" id="monster-hp-bar" style="width: 100%"></div>
                                    <div class="monster-hp-text" id="monster-hp-text">100 / 100</div>
                                </div>
                                <div class="hp-sparks">
                                    <div class="spark"></div>
                                    <div class="spark"></div>
                                    <div class="spark"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- ì˜¤ë¥¸ìª½: ë¬¸ì œ ì˜ì—­ -->
                <div class="right-panel">
                    <div class="question-section" id="question-section">
                        <div class="question-header">
                            <div class="timer-section">
                                <div class="timer-label">ë‚¨ì€ ì‹œê°„</div>
                                <div class="timer-circle">
                                    <div class="timer-glow"></div>
                                    <div class="timer-text" id="timer-text">10.0</div>
                                </div>
                            </div>
                            <div class="question-type" id="question-type">OX í€´ì¦ˆ</div>
                        </div>
                        
                        <div class="question-display">
                            <div class="question-box">
                                <div class="question-glow"></div>
                                <div class="question-text" id="question-text">
                                    í•©ê²©ì˜ íƒ‘ì— ë„ì°©í–ˆìŠµë‹ˆë‹¤. ì²« ë²ˆì§¸ ê´€ë¬¸ì„ í†µê³¼í•˜ì„¸ìš”!
                                </div>
                                <div class="text-shimmer"></div>
                                <!-- ìŠ¤í¬ë¡¤ íŒíŠ¸ëŠ” game.jsì—ì„œ ë™ì ìœ¼ë¡œ ì¶”ê°€ -->
                            </div>
                        </div>
                        
                        <!-- ì•¡ì…˜ ì˜ì—­ -->
                        <div class="action-area">
                            <!-- OX ë‹µë³€ -->
                            <div class="answer-section ox-answers" id="ox-answers" style="display: none;">
                                <button class="answer-btn answer-true" id="answer-true" data-answer="O">
                                    <div class="btn-glow"></div>
                                    <div class="answer-icon">O</div>
                                    <div class="answer-label">ë§ìŒ</div>
                                    <div class="answer-sparkles">
                                        <div class="sparkle"></div>
                                        <div class="sparkle"></div>
                                    </div>
                                </button>
                                <button class="answer-btn answer-false" id="answer-false" data-answer="X">
                                    <div class="btn-glow"></div>
                                    <div class="answer-icon">X</div>
                                    <div class="answer-label">í‹€ë¦¼</div>
                                    <div class="answer-sparkles">
                                        <div class="sparkle"></div>
                                        <div class="sparkle"></div>
                                    </div>
                                </button>
                            </div>
                            
                            <!-- ìˆ«ì ë‹µë³€ -->
                            <div class="answer-section input-answers" id="input-answers" style="display: none;">
                                <div class="input-wrapper">
                                    <div class="input-glow"></div>
                                    <input type="text" class="answer-input" id="answer-input" placeholder="ìˆ«ìë¡œ ì •ë‹µì„ ì…ë ¥í•˜ì„¸ìš”" maxlength="10">
                                    <button class="submit-btn" onclick="submitInputAnswer()">
                                        <span class="btn-shine"></span>
                                        ì •ë‹µ ì œì¶œ
                                    </button>
                                </div>
                            </div>
                            
                            <!-- ê²Œì„ ì‹œì‘ ë²„íŠ¼ (ì´ˆê¸° í™”ë©´ì—ì„œë§Œ ë³´ì„) -->
                            <div class="start-section" id="start-section">
                                <button class="start-game-btn" id="start-game-btn">
                                    <i class="fas fa-play"></i>
                                    <span>í•©ê²©ì˜ íƒ‘ ì‹œì‘í•˜ê¸°</span>
                                    <div class="btn-pulse"></div>
                                </button>
                            </div>
                        </div>
                        
                        <!-- ë¬¼ì•½ ë²„íŠ¼ (ì‘ê²Œ ë¬¸ì œ ì°½ì— ë°°ì¹˜) -->
                        <div class="potion-button-container">
                            <button class="mini-potion-btn" id="mini-potion-btn" onclick="usePotion()">
                                <i class="fas fa-flask"></i>
                                <span class="potion-count-text" id="mini-potion-count">3</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- ê²°ê³¼ í™”ë©´ -->
    <div class="result-screen" id="result-screen" style="display: none;">
        <div class="result-content">
            <div class="result-glow"></div>
            <div class="result-icon" id="result-icon">ğŸ†</div>
            <div class="result-title" id="result-title">ìŠ¹ë¦¬!</div>
            <div class="result-details" id="result-details">
                í•©ê²©ì˜ ë¬¸ì§€ê¸°ë¥¼ ë¬¼ë¦¬ì³¤ìŠµë‹ˆë‹¤!<br>
                ë‹¤ìŒ ì¸µìœ¼ë¡œ ì´ë™í•©ë‹ˆë‹¤.
            </div>
            <div class="result-buttons">
                <button class="result-btn" id="result-btn" onclick="nextFloor()">ë‹¤ìŒ ì¸µìœ¼ë¡œ</button>
                <button class="result-btn retry-btn" id="retry-btn" onclick="retryGame()" style="display: none;">
                    <i class="fas fa-redo"></i>
                    ì²˜ìŒë¶€í„° ë‹¤ì‹œ
                </button>
            </div>
            <div class="confetti-container" id="confetti"></div>
        </div>
    </div>
    
    <!-- ë… ì˜¤ë²„ë ˆì´ -->
    <div class="poison-overlay" id="poison-overlay"></div>
    
    <!-- ì´í™íŠ¸ ì˜ì—­ -->
    <div class="hit-effects" id="hit-effects"></div>
    <div class="screen-shake" id="screen-shake"></div>
    <div class="death-shake" id="death-shake"></div>
    
    <!-- ì‚¬ìš´ë“œ -->
    <audio id="correct-sound" src="sounds/correct.mp3" preload="auto"></audio>
    <audio id="wrong-sound" src="sounds/wrong.mp3" preload="auto"></audio>
    <audio id="hit-sound" src="sounds/hit.mp3" preload="auto"></audio>
    <audio id="potion-sound" src="sounds/potion.mp3" preload="auto"></audio>
    <script src="questions.js"></script>
    <script src="game.js"></script>
    <script src="questions.js"></script>
    <script src="game.js"></script>
</body>
</html>
